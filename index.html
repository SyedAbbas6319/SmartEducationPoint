<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Education Point-Home</title>
    <link rel="stylesheet" href="common1.css">
    <link rel="stylesheet" href="indexstyles.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="common.js"></script> <!-- Include the common.js file -->

</head>

<body>
    <header>
        <nav>
            <div class="container1">
                <h1>Smart Education Point</h1>
                <ul>
                    <li><a href="index.html">Home</a></li>
                    <li><a href="course.html">Courses</a></li>
                    <li><a href="about.html">About</a></li>
                    <li><a href="signin.html">Sign In</a></li>
                    <li><a href="Signup.html">Sign Up</a></li>
                    <input type="text" id="searchBar" placeholder="Search...">
                    <i class="search-icon fas fa-search"></i>
                </ul>
            </div>
        </nav>
    </header>

    <main>
        <section id="hero">
            <div class="container">
                <h2>Welcome to <span>Smart Education Point</span></h2>
                <p>Your gateway to interactive learning</p>
                <h2>Learn From The Masters</h2>
                <p>100% online learning from the world's best universities and organizations.</p>
                <a href="course.html" class="btn">Explore Courses</a>
            </div>
        </section>
        <section class="home-section">
            <div class="container">
                <h2>Join The Education Revolution</h2>
                <p>Begin your new career with the coding challenges and discover a new career path that truly fits who you are. When it comes to digital skills, we’ve revolutionized online learning to transform our students’ lives and bridge skill gaps all over the world.</p>
                <p>Our unique and structured approach has opened doors and generated job offers for thousands of students who have gone before you.</p>
                <a href="Signup.html" class="btn">Sign up today</a>
            </div>
        </section>
        <section class="featured-courses">
            <div class="container">
                <h2>Featured Courses</h2>
                <div class="slider-container">
                    <div class="slider">
                        <!-- Featured courses will be dynamically added here -->
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <div class="fcontainer">
            <p>&copy; 2024 Smart Education Point. All Rights Reserved.</p>
        </div>
    </footer>

    <script>
        $(document).ready(function () {
            // Function to fetch and display courses
            function fetchCourses() {
                $.ajax({
                    url: 'course.php', // Path to your PHP file that fetches courses
                    type: 'GET',
                    success: function (response) {
                        var courses = response.courses;
                        var featuredCourses = [];

                        // Randomly select three courses
                        for (var i = 0; i < 3; i++) {
                            if (courses.length === 0) break; // Break if no more courses to select
                            var randomIndex = Math.floor(Math.random() * courses.length);
                            featuredCourses.push(courses[randomIndex]);
                            courses.splice(randomIndex, 1); // Remove selected course to avoid duplication
                        }

                        // Populate featured courses into the slider
                        var slider = $('.slider');
                        slider.empty(); // Clear existing courses before appending new ones
                        $.each(featuredCourses, function (index, course) {
                            var courseItem = '<div class="course-item">';
                            courseItem += '<img src="' + course.courseIconPath + '" alt="' + course.courseName + '">';
                            courseItem += '<div class="course-details">';
                            courseItem += '<h4>' + course.courseName + '</h4>';
                            // Display "Watch Now" button instead of video link
                            courseItem += '<p><button class="watch-now-btn" data-video-link="' + course.videoLecturePath + '">Watch Now</button></p>';
                            courseItem += '</div>'; // Close course-details
                            courseItem += '</div>'; // Close course-item
                            slider.append(courseItem);
                        });
                    },
                    error: function (error) {
                        console.error('Error fetching courses:', error);
                    }
                });
            }

            // Event listener for "Watch Now" button clicks
            $(document).on('click', '.watch-now-btn', function () {
                var videoLink = $(this).data('video-link');
                if (videoLink.startsWith('http') || videoLink.startsWith('https')) {
                    // Open video link in a new tab
                    window.open(videoLink, '_blank');
                } else {
                    // Redirect to video_player.html with the video link as a query parameter
                    window.location.href = 'video_player.html?video=' + encodeURIComponent(videoLink);
                }
            });
            // Fetch courses when the page loads
            fetchCourses();
        });
    </script>
</body>

</html>
